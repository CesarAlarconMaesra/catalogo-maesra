<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CatÃ¡logo MAESRA Febrero 2026</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="img/icon-192.png">
  <meta name="theme-color" content="#1f2937">
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FMS994TZZN"></script>
  <script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-FMS994TZZN');
  </script>
</head>

<div id="toastExito" class="toast">
  âœ… Pedido enviado correctamente
</div>

<body>

<div id="infoLista" style="padding:8px; font-weight:bold;">
  ğŸ“Š Lista activa: LP4
</div>

<header>
  <h1>CatÃ¡logo MAESRA Febrero 2026</h1>
<h3>"Al usar esta aplicaciÃ³n aceptas el registro de actividad con fines estadÃ­sticos."</h3>

  <button id="btnPrecio">ğŸ” Ver precios</button>
  <button onclick="ocultarPrecios()">ğŸ™ˆ Cambiar precios</button>
  <button onclick="abrirCarrito()">ğŸ›’ Ver carrito</button>
<div class="carrito-icono" onclick="abrirCarrito()">
  ğŸ›’
  <span id="contadorCarrito" class="contador">0</span>
</div>
<div class="resumen-header">
  Total: $<span id="totalHeader">0.00</span>
</div>
<input type="text" id="buscador" placeholder="Buscar producto..." />
</header>

<main id="listaProductos"></main>

<!-- Modal DETALLE -->
<div id="modal" class="modal oculto">
  <div class="modal-content">
    <span id="cerrar">&times;</span>
    <img id="dImagen" class="detalle-img" />
    <h2 id="dNombre"></h2>
    <p id="dCodigo"></p>
    <p id="dMarca"></p>
    <p id="dUnidad"></p>
    <p id="dMaster"></p>
    <p id="dInner"></p>
    <p id="dPrecio"></p>
    <button id="btnAgregarCarrito">ğŸ›’ Agregar al carrito</button>
  </div>
</div>

<!-- Modal CARRITO -->
<div class="total-carrito">
  Total: $<span id="totalCarrito">0.00</span>
</div>
<div id="modalCarrito" class="modal oculto">
<div style="margin-bottom:10px;">
  <label>Nombre del cliente:</label><br>
  <input type="text" id="nombreCliente" placeholder="Escribe el nombre del cliente">
</div>
  <div class="modal-content">
    <span onclick="cerrarCarrito()">&times;</span>
    <h2>ğŸ›’ Carrito</h2>
    <div id="contenidoCarrito"></div>
    <h3 id="totalCarrito"></h3>
    <button onclick="vaciarCarrito()">ğŸ—‘ Vaciar carrito</button>
    <button class="btn-enviar" onclick="enviarWhatsApp()">
  ğŸ“² Enviar Pedido por WhatsApp
</button>
    <button onclick="cerrarCarrito()">Cerrar</button>
  </div>
</div>

<script>
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("service-worker.js")
      .then(() => console.log("Service Worker registrado"))
      .catch(err => console.log("Error SW:", err));
  }
</script>

<script type="module">
  import { initializeApp } from 
  "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";

  import { getFirestore, collection, addDoc } from 
  "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBN2oKqeUBcaXKZ9PmNzcMlymJZbkBn0vs",
    authDomain: "catalogo-maesra.firebaseapp.com",
    projectId: "catalogo-maesra",
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  window.db = db;
  window.addDoc = addDoc;
  window.collection = collection;
</script>

<script src="app.js"></script></body>
</html>
